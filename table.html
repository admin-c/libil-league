<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ - –õ–™–∏–±–∏–ª—Å–∫–∞—è –õ–∏–≥–∞</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/ios-filled/50/3b82f6/football2.png">
    <meta name="theme-color" content="#0f172a">
</head>
<body>
    <!-- Particles Background -->
    <div class="particles" id="particles"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <div class="nav-logo">LL</div>
                <div class="nav-title">–õ–™–∏–±–∏–ª—Å–∫–∞—è –õ–∏–≥–∞</div>
            </a>
            
            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-sign-in-alt"></i> –í—Ö–æ–¥
                </a>
                <a href="table.html" class="nav-link active">
                    <i class="fas fa-table"></i> –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
                </a>
                <a href="fixtures.html" class="nav-link">
                    <i class="fas fa-calendar-alt"></i> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                </a>
                <a href="news.html" class="nav-link">
                    <i class="fas fa-newspaper"></i> –ù–æ–≤–æ—Å—Ç–∏
                </a>
            </div>
            
            <div class="nav-actions">
                <div class="user-menu" id="userMenu">
                    <div class="user-avatar" id="userAvatar">–¢</div>
                    <span id="userName">–ö–æ–º–∞–Ω–¥–∞</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <button class="mobile-menu" id="mobileMenu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Leader Card -->
        <div class="card leader-card mb-4">
            <div class="leader-badge">üèÜ –õ–ò–î–ï–† –õ–ò–ì–ò</div>
            <div class="leader-content">
                <div class="leader-avatar" id="leaderAvatar">1</div>
                <h2 id="leaderTeam" class="text-gradient" style="font-size: 1.75rem;">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã</h2>
                <p id="leaderOwner" style="color: var(--gray);">–í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–º–∞–Ω–¥—ã</p>
                
                <div class="leader-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="leaderPoints">0</div>
                        <div class="stat-label">–û—á–∫–æ–≤</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="leaderWins">0</div>
                        <div class="stat-label">–ü–æ–±–µ–¥</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="leaderGD">0</div>
                        <div class="stat-label">–†–∞–∑–Ω–∏—Ü–∞ –º—è—á–µ–π</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <button class="filter-btn active" onclick="filterTable('all')">
                <i class="fas fa-list"></i> –í—Å–µ –∫–æ–º–∞–Ω–¥—ã
            </button>
            <button class="filter-btn" onclick="filterTable('top')">
                <i class="fas fa-trophy"></i> –¢–æ–ø-5
            </button>
            <button class="filter-btn" onclick="filterTable('user')">
                <i class="fas fa-user"></i> –ú–æ—è –∫–æ–º–∞–Ω–¥–∞
            </button>
        </div>

        <!-- Standings Table -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞</h2>
                <div class="card-badge">–°–µ–∑–æ–Ω 2026</div>
            </div>

            <div class="table-container">
                <table class="table" id="standingsTable">
                    <thead>
                        <tr>
                            <th width="60">#</th>
                            <th>–ö–æ–º–∞–Ω–¥–∞</th>
                            <th width="80">–ò</th>
                            <th width="80">–í</th>
                            <th width="80">–ù</th>
                            <th width="80">–ü</th>
                            <th width="80">–ì–ó</th>
                            <th width="80">–ì–ü</th>
                            <th width="80">–†–ú</th>
                            <th width="80">–û</th>
                            <th width="120">–§–æ—Ä–º–∞</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>

            <!-- Stats Summary -->
            <div class="grid grid-4 mt-4" id="statsSummary">
                <div class="text-center p-3" style="background: rgba(59, 130, 246, 0.1); border-radius: var(--radius-sm);">
                    <div class="stat-value" id="totalTeams">0</div>
                    <div class="stat-label">–ö–æ–º–∞–Ω–¥</div>
                </div>
                <div class="text-center p-3" style="background: rgba(16, 185, 129, 0.1); border-radius: var(--radius-sm);">
                    <div class="stat-value" id="totalMatches">0</div>
                    <div class="stat-label">–ú–∞—Ç—á–µ–π</div>
                </div>
                <div class="text-center p-3" style="background: rgba(245, 158, 11, 0.1); border-radius: var(--radius-sm);">
                    <div class="stat-value" id="totalGoals">0</div>
                    <div class="stat-label">–ì–æ–ª–æ–≤</div>
                </div>
                <div class="text-center p-3" style="background: rgba(239, 68, 68, 0.1); border-radius: var(--radius-sm);">
                    <div class="stat-value" id="avgPoints">0</div>
                    <div class="stat-label">–û—á–∫–æ–≤ –≤ —Å—Ä–µ–¥–Ω–µ–º</div>
                </div>
            </div>
        </div>

        <!-- User Team Info -->
        <div class="card mt-4" id="userTeamCard" style="display: none;">
            <div class="card-header">
                <h2 class="card-title">–ú–æ—è –∫–æ–º–∞–Ω–¥–∞</h2>
                <div class="card-badge" id="userPosition">#0</div>
            </div>
            
            <div class="grid grid-4" id="userTeamStats">
                <!-- User stats will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>¬© 2026 –õ–™–∏–±–∏–ª—Å–∫–∞—è –õ–∏–≥–∞ FC Mobile. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        <div class="footer-links">
            <a href="#" class="footer-link">–ü—Ä–∞–≤–∏–ª–∞</a>
            <a href="#" class="footer-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            <a href="admin.html" class="footer-link">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Particles background
        function createParticles() {
            const particles = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = 15 + Math.random() * 15 + 's';
                particles.appendChild(particle);
            }
        }

        // Mobile menu
        document.getElementById('mobileMenu').addEventListener('click', () => {
            document.querySelector('.nav-links').classList.toggle('active');
        });

        // User menu
        document.getElementById('userMenu').addEventListener('click', () => {
            if (confirm('–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?')) {
                localStorage.removeItem('liga_userTeam');
                localStorage.removeItem('liga_userOwner');
                window.location.href = 'index.html';
            }
        });

        let standingsData = [];
        let userTeam = '';

        // Load standings data
        async function loadStandings() {
            try {
                const response = await fetch('/api/data');
                const data = await response.json();
                standingsData = data.standings || [];
                
                // Sort by points, then goal difference, then goals for
                standingsData.sort((a, b) => {
                    if (b.points !== a.points) return b.points - a.points;
                    const bGD = b.goalsFor - b.goalsAgainst;
                    const aGD = a.goalsFor - a.goalsAgainst;
                    if (bGD !== aGD) return bGD - aGD;
                    return b.goalsFor - a.goalsFor;
                });
                
                updateTable();
                updateLeader();
                updateUserInfo();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∞–±–ª–∏—Ü—ã:', error);
                document.getElementById('tableBody').innerHTML = `
                    <tr>
                        <td colspan="11" class="text-center p-4">
                            <p style="color: var(--gray);">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</p>
                        </td>
                    </tr>
                `;
            }
        }

        // Update table
        function updateTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            standingsData.forEach((team, index) => {
                const position = index + 1;
                const form = getTeamForm(team);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="table-rank">${position}</td>
                    <td>
                        <div class="table-team">
                            <div class="team-logo">${team.team.charAt(0)}</div>
                            <div>
                                <div class="team-name">${team.team}</div>
                                <div class="team-owner">${team.owner}</div>
                            </div>
                        </div>
                    </td>
                    <td>${team.played || 0}</td>
                    <td>${team.wins || 0}</td>
                    <td>${team.draws || 0}</td>
                    <td>${team.losses || 0}</td>
                    <td>${team.goalsFor || 0}</td>
                    <td>${team.goalsAgainst || 0}</td>
                    <td>${(team.goalsFor || 0) - (team.goalsAgainst || 0)}</td>
                    <td><strong style="color: var(--accent);">${team.points || 0}</strong></td>
                    <td>
                        <div style="display: flex; gap: 2px;">
                            ${form.split('').map(result => `
                                <div style="
                                    width: 8px;
                                    height: 8px;
                                    border-radius: 50%;
                                    background: ${result === 'W' ? 'var(--accent)' : 
                                                result === 'D' ? 'var(--warning)' : 
                                                'var(--danger)'};
                                "></div>
                            `).join('')}
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            updateStats();
        }

        // Get team form (last 5 matches)
        function getTeamForm(team) {
            // In a real app, this would fetch match history
            // For now, generate random form
            const results = ['W', 'D', 'L'];
            return Array(5).fill(0).map(() => 
                results[Math.floor(Math.random() * results.length)]
            ).join('');
        }

        // Update leader info
        function updateLeader() {
            if (standingsData.length > 0) {
                const leader = standingsData[0];
                document.getElementById('leaderAvatar').textContent = leader.team.charAt(0);
                document.getElementById('leaderTeam').textContent = leader.team;
                document.getElementById('leaderOwner').textContent = leader.owner;
                document.getElementById('leaderPoints').textContent = leader.points || 0;
                document.getElementById('leaderWins').textContent = leader.wins || 0;
                document.getElementById('leaderGD').textContent = 
                    (leader.goalsFor || 0) - (leader.goalsAgainst || 0);
            }
        }

        // Update user info
        function updateUserInfo() {
            userTeam = localStorage.getItem('liga_userTeam');
            if (userTeam) {
                document.getElementById('userAvatar').textContent = userTeam.charAt(0);
                document.getElementById('userName').textContent = userTeam;
                
                const userIndex = standingsData.findIndex(t => 
                    t.team.toLowerCase() === userTeam.toLowerCase()
                );
                
                if (userIndex !== -1) {
                    const userData = standingsData[userIndex];
                    document.getElementById('userTeamCard').style.display = 'block';
                    document.getElementById('userPosition').textContent = `#${userIndex + 1}`;
                    
                    document.getElementById('userTeamStats').innerHTML = `
                        <div class="text-center p-2">
                            <div class="stat-value">${userData.points || 0}</div>
                            <div class="stat-label">–û—á–∫–∏</div>
                        </div>
                        <div class="text-center p-2">
                            <div class="stat-value">${userData.wins || 0}</div>
                            <div class="stat-label">–ü–æ–±–µ–¥—ã</div>
                        </div>
                        <div class="text-center p-2">
                            <div class="stat-value">${userData.goalsFor || 0}</div>
                            <div class="stat-label">–ó–∞–±–∏—Ç–æ</div>
                        </div>
                        <div class="text-center p-2">
                            <div class="stat-value">${userData.goalsAgainst || 0}</div>
                            <div class="stat-label">–ü—Ä–æ–ø—É—â–µ–Ω–æ</div>
                        </div>
                    `;
                }
            }
        }

        // Update statistics
        function updateStats() {
            document.getElementById('totalTeams').textContent = standingsData.length;
            
            const totalMatches = standingsData.reduce((sum, team) => 
                sum + (team.played || 0), 0
            );
            document.getElementById('totalMatches').textContent = totalMatches;
            
            const totalGoals = standingsData.reduce((sum, team) => 
                sum + (team.goalsFor || 0), 0
            );
            document.getElementById('totalGoals').textContent = totalGoals;
            
            const avgPoints = standingsData.length > 0 ? 
                (standingsData.reduce((sum, team) => sum + (team.points || 0), 0) / standingsData.length).toFixed(1) : 
                '0';
            document.getElementById('avgPoints').textContent = avgPoints;
        }

        // Filter table
        function filterTable(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => 
                btn.classList.remove('active')
            );
            event.target.classList.add('active');
            
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            let filteredData = standingsData;
            
            if (type === 'top') {
                filteredData = standingsData.slice(0, 5);
            } else if (type === 'user' && userTeam) {
                filteredData = standingsData.filter(t => 
                    t.team.toLowerCase() === userTeam.toLowerCase()
                );
            }
            
            filteredData.forEach((team, index) => {
                const position = type === 'all' ? index + 1 : 
                               type === 'top' ? index + 1 : 1;
                const form = getTeamForm(team);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="table-rank">${position}</td>
                    <td>
                        <div class="table-team">
                            <div class="team-logo">${team.team.charAt(0)}</div>
                            <div>
                                <div class="team-name">${team.team}</div>
                                <div class="team-owner">${team.owner}</div>
                            </div>
                        </div>
                    </td>
                    <td>${team.played || 0}</td>
                    <td>${team.wins || 0}</td>
                    <td>${team.draws || 0}</td>
                    <td>${team.losses || 0}</td>
                    <td>${team.goalsFor || 0}</td>
                    <td>${team.goalsAgainst || 0}</td>
                    <td>${(team.goalsFor || 0) - (team.goalsAgainst || 0)}</td>
                    <td><strong style="color: var(--accent);">${team.points || 0}</strong></td>
                    <td>
                        <div style="display: flex; gap: 2px;">
                            ${form.split('').map(result => `
                                <div style="
                                    width: 8px;
                                    height: 8px;
                                    border-radius: 50%;
                                    background: ${result === 'W' ? 'var(--accent)' : 
                                                result === 'D' ? 'var(--warning)' : 
                                                'var(--danger)'};
                                "></div>
                            `).join('')}
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            
            // Check if user is logged in
            if (!localStorage.getItem('liga_userTeam')) {
                window.location.href = 'index.html';
                return;
            }
            
            loadStandings();
            
            // Auto-refresh every 30 seconds
            setInterval(loadStandings, 30000);
        });
    </script>
    <script>
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–∞–±–ª–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        console.log('–¢–∞–±–ª–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
    });
</script>
    <script>
// –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
(function() {
    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ input
    document.addEventListener('DOMContentLoaded', function() {
        let viewport = document.querySelector('meta[name="viewport"]');
        if (viewport) {
            viewport.content = 'width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes';
        }
        
        // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 100vh –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
        function setVh() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        setVh();
        window.addEventListener('resize', setVh);
        window.addEventListener('orientationchange', setVh);
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ iOS
        document.addEventListener('touchstart', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                setTimeout(() => {
                    e.target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            }
        }, { passive: true });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', function(e) {
            const navLinks = document.querySelector('.nav-links');
            const mobileMenu = document.querySelector('.mobile-menu');
            
            if (navLinks && navLinks.classList.contains('active') && 
                !navLinks.contains(e.target) && 
                !mobileMenu.contains(e.target)) {
                navLinks.classList.remove('active');
            }
        });
        
        // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞ –Ω–∞ iOS
        document.body.addEventListener('touchmove', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                return;
            }
            e.preventDefault();
        }, { passive: false });
    });
    
    // –í–∫–ª—é—á–µ–Ω–∏–µ haptic feedback –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
    if ('vibrate' in navigator) {
        document.addEventListener('click', function(e) {
            if (e.target.closest('.btn') || e.target.closest('.nav-link')) {
                navigator.vibrate(10);
            }
        }, { passive: true });
    }
})();
</script>
</body>
</html>
